<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="Content-Security-Policy" content="default-src 'self' https: data: 'unsafe-inline' 'unsafe-eval'; script-src 'self' https: 'unsafe-inline' 'unsafe-eval'; style-src 'self' https: 'unsafe-inline'; font-src 'self' https: data:; img-src 'self' https: data: blob:; connect-src 'self' https: http://localhost:8080 http://localhost:3000 http://localhost:3001 ws://localhost:*;">
  <title>Agro Laboral - Mendoza</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <!-- FontAwesome CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Custom CSS -->
    <link rel="stylesheet" href="css/style.css?v=botones-grandes">
    <link rel="stylesheet" href="css/botones-gigantes.css?v=1">
    <link rel="stylesheet" href="css/map-ofertas.css?v=1">
    <link rel="stylesheet" href="css/map-establecimientos.css?v=1">
    <link rel="stylesheet" href="css/marcador-destacado.css">
    <link rel="stylesheet" href="css/map-markers.css?v=1">
    <link rel="stylesheet" href="css/ofertas-section.css?v=1">
    
    <!-- Estilos adicionales para dashboard offcanvas -->
    <style>
        .offcanvas.offcanvas-end {
            --bs-offcanvas-width: 90%;
            max-width: 800px;
        }
        
        .bg-black {
            background-color: #000000 !important;
        }
        
        .toast-container {
            z-index: 1070;
        }
        
        /* CORRECCI√ìN CR√çTICA: Z-index para modals */
        .modal {
            z-index: 1055 !important;
        }
        
        .modal-backdrop {
            z-index: 1050 !important;
        }
        
        /* CR√çTICO: El backdrop NO debe bloquear eventos dentro del modal */
        .modal-backdrop {
            pointer-events: none !important;
        }
        
        /* CR√çTICO: El modal S√ç debe recibir eventos */
        .modal-dialog {
            pointer-events: auto !important;
            z-index: 1056 !important;
            position: relative !important;
        }
        
        /* Asegurar interactividad TOTAL de inputs en modal */
        .modal input, 
        .modal select, 
        .modal textarea, 
        .modal button {
            pointer-events: auto !important;
            position: relative !important;
            z-index: 1057 !important;
        }
        
        .finca-card {
            transition: all 0.3s ease;
            background: #2A2A2A;
        }
        
        .finca-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.3);
        }
        
        /* Estilos para formularios del wizard */
        .form-control:focus, .form-select:focus {
            border-color: #4A90E2;
            box-shadow: 0 0 0 0.2rem rgba(74, 144, 226, 0.25);
        }
        
        .btn-primary-custom:focus {
            box-shadow: 0 0 0 0.2rem rgba(74, 144, 226, 0.5);
        }
        
        /* Animaciones suaves */
        .dashboard-card, .stats-card, .confirmation-card {
            transition: all 0.3s ease;
        }
        
        .dashboard-card:hover, .stats-card:hover {
            transform: translateY(-2px);
        }
    </style>
</head>
<body>
    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg navbar-light fixed-top" id="transparent-navbar">
        <div class="container-fluid">
            <!-- Logo y texto eliminados de la navbar -->
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                    <li class="nav-item">
                        <a class="nav-link active" aria-current="page" href="#">Inicio</a>
                    </li>
                    <li class="nav-item">

                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#">Ofertas</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#servicios">Nuestros servicios</a>
                    </li>
                </ul>
                <!-- Botones p√∫blicos (antes del registro) - Estilo nav-link -->
                <ul class="navbar-nav" id="public-buttons">
                    <li class="nav-item">
                        <a class="nav-link" href="#" id="btn-login" data-bs-toggle="modal" data-bs-target="#modalLogin" onclick="return false;">Login</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#" data-bs-toggle="modal" data-bs-target="#modalRegistroEmpleador" id="btn-registro" onclick="return false;">Registro Empleador</a>
                    </li>
                </ul>
                <div class="d-flex">
                </div>
                    <!-- Modal se mover√° fuera del nav -->
                    </div>
                </div>
            </div>
        </div>
                </div>
            </div>
        </div>
    </nav>
            <!-- Banner -->
    <!-- Modal Registro Empleador (Wizard) -->
    <div class="modal fade" id="modalRegistroEmpleador" tabindex="-1" aria-labelledby="modalRegistroEmpleadorLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header border-0 pb-0">
                    <h4 class="modal-title w-100 text-center fw-bold" id="modalRegistroEmpleadorLabel">Registro de Empleador</h4>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Cerrar"></button>
                </div>
                <div class="modal-body pt-0">
                    <!-- Wizard Steps -->
                    <div class="wizard-progress mb-4">
                        <div class="progress wizard-progress-bar">
                            <div class="progress-bar wizard-progress-bar-inner" role="progressbar"></div>
                        </div>
                        <div class="wizard-steps-labels d-flex justify-content-between mt-2">
                            <div class="wizard-step-label active" data-step="0">
                                <span>1</span> 
                                <span>Datos<br>de Empresa</span>
                            </div>
                            <div class="wizard-step-label" data-step="1">
                                <span>2</span> 
                                <span>Confirmaci√≥n</span>
                            </div>
                        </div>
                    </div>
                    <!-- Paso 1: Datos de empresa -->
                    <form id="form-registro-empleador-paso1">
                        <div class="mb-4">
                            <h5 class="fw-bold mb-3">Datos de Empresa</h5>
                            <div class="mb-3 position-relative">
                                <label for="cuit" class="form-label">CUIT</label>
                                <input type="text" class="form-control" id="cuit" name="cuit" placeholder="Ej: 20123456789">
                                <div class="char-counter">0/11</div>
                            </div>
                            <div class="mb-3 position-relative">
                                <label for="razonSocial" class="form-label">Raz√≥n Social</label>
                                <input type="text" class="form-control" id="razonSocial" name="razonSocial" placeholder="Ej: Finca Los Olivos">
                                <div class="char-counter">0/50</div>
                            </div>
                            <div class="mb-3 position-relative">
                                <label for="password" class="form-label">Contrase√±a</label>
                                <input type="password" class="form-control" id="password" name="password" placeholder="Ingrese contrase√±a (6 caracteres)" maxlength="6">
                                <div class="char-counter">0/6</div>
                            </div>
                            <div class="mb-3 position-relative">
                                <label for="password2" class="form-label">Repetir Contrase√±a</label>
                                <input type="password" class="form-control" id="password2" name="password2" placeholder="Repita la contrase√±a" maxlength="6">
                                <div class="char-counter">0/6</div>
                            </div>
                        </div>
                        <div class="d-flex justify-content-end">
                            <button type="button" class="btn btn-primary" id="btn-siguiente-paso1">Siguiente</button>
                        </div>
                    </form>
                    <!-- Paso 2: Confirmaci√≥n (oculto por ahora) -->
                    <form id="form-registro-empleador-paso2" class="d-none">
                        <div id="mensaje-error-confirmacion" class="alert alert-danger d-none" role="alert">
                            Faltan datos obligatorios en el resumen. Por favor, revise los pasos anteriores.
                        </div>
                        <div class="mb-4">
                            <h5 class="fw-bold mb-3">Confirmaci√≥n de Registro</h5>
                            <ul class="list-group mb-3" id="confirmacion-lista">
                                <!-- Los datos se llenar√°n por JS -->
                            </ul>
                            <div class="d-flex justify-content-between">
                                <button type="button" class="btn btn-outline-secondary" id="btn-anterior-paso5">Anterior</button>
                                <button type="submit" class="btn btn-success" id="btn-confirmar-registro">Confirmar Registro</button>
                            </div>
                            <div id="mensaje-exito" class="alert alert-success mt-4 d-none" role="alert">
                                ¬°Su cuenta ha sido creada con √©xito!
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Login -->
    <div class="modal fade" id="modalLogin" tabindex="-1" aria-labelledby="modalLoginLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header border-0 pb-0">
                    <h4 class="modal-title w-100 text-center fw-bold" id="modalLoginLabel">Iniciar Sesi√≥n</h4>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Cerrar"></button>
                </div>
                <div class="modal-body pt-0">
                    <form id="form-login">
                        <div class="mb-4">
                            <div class="mb-3">
                                <label for="cuit-login" class="form-label">CUIT</label>
                                <input type="text" class="form-control" id="cuit-login" name="cuit-login" placeholder="Ej: 20123456789">
                            </div>
                            <div class="mb-3 position-relative">
                                <label for="password-login" class="form-label">Contrase√±a</label>
                                <input type="password" class="form-control" id="password-login" name="password-login" placeholder="Ingresa tu contrase√±a">
                            </div>
                            <div id="login-error" class="alert alert-danger d-none">
                                <i class="fas fa-exclamation-circle me-2"></i><span></span>
                            </div>
                        </div>
                        <div class="d-grid gap-2">
                            <button type="button" class="btn btn-primary btn-lg" id="btn-iniciar-sesion">
                                <i class="fas fa-sign-in-alt me-2"></i>Iniciar Sesi√≥n
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
    <div class="banner-container text-white d-flex align-items-center justify-content-center">
        <!-- Video de fondo -->
        <video autoplay muted loop id="background-video" class="video-background">
            <source src="video-agricultura.mp4" type="video/mp4">
            <!-- Fallback para navegadores que no soportan video -->
            Tu navegador no soporta videos HTML5.
        </video>
        
        <!-- Overlay para mejorar legibilidad del texto -->
        <div class="video-overlay"></div>
        
        <!-- Contenido del banner -->
        <div class="text-center banner-text-content">
            <!-- √çcono de uva eliminado -->
            <h1 class="display-4 fw-bold title-gradient animated-title">Bienvenidos a Agro Laboral</h1>
            <p class="lead subtitle-enhanced">La plataforma para conectar Al Empresario y Al trabajador.</p>
        </div>
    </div>
    
    <!-- Vista P√∫blica (visible por defecto) -->
    <div id="public-view">
    <!-- Mapa Interactivo de Establecimientos/Fincas -->
    <main class="container py-5">
        <div class="row justify-content-center mb-4">
            <div class="col-lg-10">
                <div class="card h-100 shadow-sm border-0 servicio-card servicio-card-mapa">
                    <div class="card-body text-center">
                        <div class="mb-3 servicio-icon servicio-icon-mapa"><i class="fas fa-map-marked-alt"></i></div>
                        <h2 class="fw-bold">Mapa Interactivo de Establecimientos/Fincas</h2>
                        <p class="mb-0">Explora la ubicaci√≥n de todas las fincas y establecimientos agr√≠colas registrados en nuestra plataforma</p>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Mapa Principal de Establecimientos -->
        <div class="row justify-content-center">
            <div class="col-lg-10">
                <!-- Bot√≥n de Ubicaci√≥n Visible -->
                <div class="d-flex justify-content-between align-items-center mb-3">
                    <h3 class="text-primary mb-0">üó∫Ô∏è Mapa de Establecimientos</h3>
                    <button id="btn-mi-ubicacion" class="btn btn-danger btn-lg" title="Mostrar mi ubicaci√≥n en el mapa">
                        <i class="fas fa-location-arrow"></i> Mi Ubicaci√≥n
                    </button>
                </div>
                
                <div id="main-map" class="my-3">
                    <!-- El mapa se cargar√° aqu√≠ -->
                    <div id="map-loading">
                        <div class="spinner-border text-primary" role="status">
                            <span class="visually-hidden">Cargando mapa...</span>
                        </div>
                        <p class="mt-2">Cargando mapa...</p>
                    </div>
                </div>
                
                <!-- Informaci√≥n de ubicaci√≥n -->
                <div id="ubicacion-info" class="alert alert-info d-none">
                    <h6><i class="fas fa-info-circle"></i> Informaci√≥n de Ubicaci√≥n</h6>
                    <p id="ubicacion-detalles" class="mb-0"></p>
                </div>
            </div>
        </div>
    </main>

    <!-- Ofertas Disponibles -->
    <section id="ofertas-disponibles" class="container py-5">
        <div class="row justify-content-center mb-4">
            <div class="col-lg-10">
                <div class="card h-100 shadow-sm border-0 servicio-card servicio-card-ofertas">
                    <div class="card-body text-center">
                        <div class="mb-3 servicio-icon servicio-icon-ofertas"><i class="fas fa-briefcase"></i></div>
                        <h2 class="fw-bold">Ofertas Disponibles</h2>
                        <p class="mb-0">Descubre oportunidades laborales en el sector agr√≠cola</p>
                        <div class="mt-3">
                            <span id="contador-ofertas-publicas" class="badge bg-success fs-6">Cargando ofertas...</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Filtros de Ofertas P√∫blicas -->
        <div class="row justify-content-center mb-4">
            <div class="col-lg-10">
                <div class="card shadow-sm border-0 ofertas-filtros-container">
                    <div class="card-body">
                        <div class="row g-3 align-items-end">
                            <!-- Filtro por Puesto -->
                            <div class="col-md-4">
                                <label for="filtro-puesto-publico" class="form-label">
                                    <i class="fas fa-briefcase"></i>
                                    Filtrar por puesto
                                </label>
                                <select class="form-select" id="filtro-puesto-publico">
                                    <option value="">Todos los puestos</option>
                                    <option value="PODADOR/ATADOR">Podador/Atador</option>
                                    <option value="COSECHADOR">Cosechador</option>
                                    <option value="TRACTORISTA">Tractorista</option>
                                    <option value="CAPATAZ">Capataz</option>
                                    <option value="VI√ëATERO">Vi√±atero</option>
                                    <option value="JORNALERO">Jornalero</option>
                                    <option value="SUPERVISOR">Supervisor</option>
                                </select>
                            </div>
                            
                            <!-- Ordenamiento -->
                            <div class="col-md-4">
                                <label class="form-label">
                                    <i class="fas fa-sort"></i>
                                    Ordenar por
                                </label>
                                <div class="btn-group w-100" role="group">
                                    <button type="button" class="btn btn-outline-primary btn-orden-publico active" data-orden="fecha">
                                        <i class="fas fa-calendar-alt me-1"></i>
                                        Fecha
                                    </button>
                                    <button type="button" class="btn btn-outline-primary btn-orden-publico" data-orden="distancia">
                                        <i class="fas fa-map-marker-alt me-1"></i>
                                        Distancia
                                    </button>
                                </div>
                            </div>
                            
                            <!-- Geolocalizaci√≥n -->
                            <div class="col-md-4">
                                <label class="form-label">
                                    <i class="fas fa-location-arrow"></i>
                                    Mi ubicaci√≥n
                                </label>
                                <button type="button" class="btn btn-outline-secondary w-100" id="btn-geolocalizacion">
                                    <i class="fas fa-crosshairs me-2"></i>
                                    Activar ubicaci√≥n
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Toggle Vista Lista/Mapa -->
        <div class="row justify-content-center mb-4 ofertas-toggle-container">
            <div class="col-lg-10">
                <div class="d-flex justify-content-between align-items-center">
                    <div class="d-flex align-items-center">
                        <i class="fas fa-eye me-2 text-info"></i>
                        <span class="text-light fw-semibold">Vista actual:</span>
                    </div>
                    <div class="btn-group" role="group" aria-label="Cambiar vista">
                        <button type="button" class="btn btn-primary active" id="btn-vista-lista" onclick="cambiarVista('lista')">
                            <i class="fas fa-list me-2"></i>
                            Lista de Ofertas
                        </button>
                        <button type="button" class="btn btn-outline-primary" id="btn-vista-mapa" onclick="cambiarVista('mapa')">
                            <i class="fas fa-map me-2"></i>
                            Vista de Mapa
                        </button>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Container del Mapa (oculto por defecto) -->
        <div class="row justify-content-center mb-4 d-none" id="mapa-container">
            <div class="col-lg-10">
                <div class="card shadow-sm border-0">
                    <div class="card-header bg-primary text-white">
                        <div class="d-flex justify-content-between align-items-center">
                            <h5 class="mb-0">
                                <i class="fas fa-map-marker-alt me-2"></i>
                                Mapa de Ofertas Laborales
                            </h5>
                            <button type="button" class="btn btn-light btn-sm" id="btn-mi-ubicacion-mapa" onclick="mapaPrincipal.ubicacionUsuario.obtenerUbicacion()">
                                <i class="fas fa-crosshairs me-1"></i>
                                Mi Ubicaci√≥n
                            </button>
                        </div>
                    </div>
                    <div class="card-body p-0">
                        <div id="map"></div>
                    </div>
                    <div class="card-footer text-muted">
                        <div class="d-flex justify-content-between align-items-center">
                            <small>
                                <i class="fas fa-info-circle me-1"></i>
                                Haz clic en los marcadores para ver detalles de cada oferta
                            </small>
                            <small class="text-success" id="ubicacion-status">
                                <i class="fas fa-check-circle me-1"></i>
                                Ubicaci√≥n activada
                            </small>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Container de Ofertas -->
        <div class="row g-4 justify-content-center" id="ofertas-publicas-container">
            <!-- Las ofertas se cargar√°n aqu√≠ din√°micamente -->
            <div class="col-12 text-center py-5 ofertas-loading-container">
                <div class="spinner-border text-primary" role="status" aria-label="Cargando ofertas">
                    <span class="visually-hidden">Cargando ofertas...</span>
                </div>
                <p class="mt-3">Preparando sistema de ofertas laborales...</p>
                <small class="text-muted">Conectando con base de datos de empleos agr√≠colas</small>
            </div>
        </div>
        
        <!-- Spinner de carga -->
        <div id="ofertas-publicas-spinner" class="text-center py-3 d-none">
            <div class="spinner-border text-primary" role="status">
                <span class="visually-hidden">Actualizando ofertas...</span>
            </div>
        </div>
    </section>

    <!-- Servicios -->
    <section id="servicios" class="container py-5">
        <div class="row justify-content-center mb-4">
            <div class="col-lg-10">
                <div class="card h-100 shadow-sm border-0 servicio-card servicio-card-servicios">
                    <div class="card-body text-center">
                        <div class="mb-3 servicio-icon servicio-icon-servicios"><i class="fas fa-cogs"></i></div>
                        <h2 class="fw-bold">Nuestros Servicios</h2>
                        <p class="mb-0">Conectamos el talento agr√≠cola con las mejores oportunidades laborales</p>
                    </div>
                </div>
            </div>
        </div>
        <div class="row g-4 justify-content-center">
            <div class="col-md-4">
                <div class="card h-100 shadow-sm border-0 servicio-card servicio-card-ubicacion">
                    <div class="card-body">
                        <div class="mb-3 servicio-icon servicio-icon-ubicacion"><i class="fas fa-map-marker-alt"></i></div>
                        <h5 class="fw-bold">Ubicaci√≥n Precisa</h5>
                        <p class="mb-0">Encuentra trabajos cerca de tu ubicaci√≥n o personal en tu zona espec√≠fica</p>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="card h-100 shadow-sm border-0 servicio-card servicio-card-perfiles">
                    <div class="card-body">
                        <div class="mb-3 servicio-icon servicio-icon-perfiles"><i class="fas fa-user-check"></i></div>
                        <h5 class="fw-bold">Perfiles Verificados</h5>
                        <p class="mb-0">Todos los usuarios pasan por un proceso de verificaci√≥n para garantizar confiabilidad</p>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="card h-100 shadow-sm border-0 servicio-card servicio-card-trabajo">
                    <div class="card-body">
                        <div class="mb-3 servicio-icon servicio-icon-trabajo"><i class="fas fa-clock"></i></div>
                        <h5 class="fw-bold">Trabajo Temporal y Fijo</h5>
                        <p class="mb-0">Desde trabajos de temporada hasta empleos permanentes en el sector agr√≠cola</p>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="card h-100 shadow-sm border-0 servicio-card servicio-card-comunicacion">
                    <div class="card-body">
                        <div class="mb-3 servicio-icon servicio-icon-comunicacion"><i class="fas fa-comments"></i></div>
                        <h5 class="fw-bold">Comunicaci√≥n Directa</h5>
                        <p class="mb-0">Chatea directamente con empleadores o trabajadores sin intermediarios</p>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="card h-100 shadow-sm border-0 servicio-card servicio-card-pagos">
                    <div class="card-body">
                        <div class="mb-3 servicio-icon servicio-icon-pagos"><i class="fas fa-shield-alt"></i></div>
                        <h5 class="fw-bold">Pagos Seguros</h5>
                        <p class="mb-0">Sistema de pagos protegido que garantiza la seguridad de ambas partes</p>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="card h-100 shadow-sm border-0 servicio-card servicio-card-horarios">
                    <div class="card-body">
                        <div class="mb-3 servicio-icon servicio-icon-horarios"><i class="fas fa-calendar-alt"></i></div>
                        <h5 class="fw-bold">Horarios Flexibles</h5>
                        <p class="mb-0">Adapta tus horarios de trabajo seg√∫n tus necesidades y disponibilidad</p>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!-- C√≥mo Funciona -->
    <section id="como-funciona" class="container py-5">
        <div class="row justify-content-center mb-4">
            <div class="col-lg-10">
                <div class="card h-100 shadow-sm border-0 servicio-card servicio-card-funciona">
                    <div class="card-body text-center">
                        <div class="mb-3 servicio-icon servicio-icon-funciona"><i class="fas fa-question-circle"></i></div>
                        <h2 class="fw-bold">¬øC√≥mo Funciona?</h2>
                        <p class="mb-0">Simple, r√°pido y efectivo</p>
                    </div>
                </div>
            </div>
        </div>
        <div class="row justify-content-center g-4">
            <div class="col-lg-5">
                <div class="funciona-card shadow servicio-card h-100 d-flex flex-column">
                    <div class="p-4">
                        <h4 class="fw-bold text-success text-center mb-4">Para Trabajadores</h4>
                        <ul class="list-unstyled flex-grow-1">
                            <li class="d-flex mb-4 align-items-start">
                                <span class="funciona-num funciona-num-trabajador me-3">1</span>
                                <div>
                                    <span class="fw-bold">Reg√≠strate y Crea tu Perfil</span><br>
                                    <span class="text-muted">Completa tu informaci√≥n personal, experiencia y habilidades</span>
                                </div>
                            </li>
                            <li class="d-flex mb-4 align-items-start">
                                <span class="funciona-num funciona-num-trabajador me-3">2</span>
                                <div>
                                    <span class="fw-bold">Busca Ofertas de Trabajo</span><br>
                                    <span class="text-muted">Explora trabajos disponibles en tu √°rea geogr√°fica</span>
                                </div>
                            </li>
                            <li class="d-flex mb-4 align-items-start">
                                <span class="funciona-num funciona-num-trabajador me-3">3</span>
                                <div>
                                    <span class="fw-bold">Aplica y Conecta</span><br>
                                    <span class="text-muted">Env√≠a tu solicitud y conecta directamente con empleadores</span>
                                </div>
                            </li>
                            <li class="d-flex mb-0 align-items-start">
                                <span class="funciona-num funciona-num-trabajador me-3">4</span>
                                <div>
                                    <span class="fw-bold">Trabaja y Recibe Pago</span><br>
                                    <span class="text-muted">Completa el trabajo y recibe tu pago de forma segura</span>
                                </div>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="col-lg-5">
                <div class="funciona-card shadow servicio-card h-100 d-flex flex-column">
                    <div class="p-4">
                        <h4 class="fw-bold text-primary text-center mb-4">Para Empleadores</h4>
                        <ul class="list-unstyled flex-grow-1">
                            <li class="d-flex mb-4 align-items-start">
                                <span class="funciona-num funciona-num-empleador me-3">1</span>
                                <div>
                                    <span class="fw-bold">Crea tu Cuenta Empresarial</span><br>
                                    <span class="text-muted">Registra tu empresa y verifica tu informaci√≥n</span>
                                </div>
                            </li>
                            <li class="d-flex mb-4 align-items-start">
                                <span class="funciona-num funciona-num-empleador me-3">2</span>
                                <div>
                                    <span class="fw-bold">Publica Ofertas de Trabajo</span><br>
                                    <span class="text-muted">Describe el trabajo, ubicaci√≥n y requisitos necesarios</span>
                                </div>
                            </li>
                            <li class="d-flex mb-4 align-items-start">
                                <span class="funciona-num funciona-num-empleador me-3">3</span>
                                <div>
                                    <span class="fw-bold">Revisa Candidatos</span><br>
                                    <span class="text-muted">Examina perfiles y selecciona a los mejores candidatos</span>
                                </div>
                            </li>
                            <li class="d-flex mb-0 align-items-start">
                                <span class="funciona-num funciona-num-empleador me-3">4</span>
                                <div>
                                    <span class="fw-bold">Contrata y Supervisa</span><br>
                                    <span class="text-muted">Contrata trabajadores y supervisa el progreso del trabajo</span>
                                </div>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!-- Main Content -->
    </div> <!-- Fin de public-view -->
    
    <!-- Dashboard Offcanvas -->
    <div class="offcanvas offcanvas-end" tabindex="-1" id="dashboardOffcanvas" aria-labelledby="dashboardOffcanvasLabel">
        <div class="offcanvas-header bg-dark text-white">
            <h5 class="offcanvas-title" id="dashboardOffcanvasLabel">
                <i class="fas fa-tachometer-alt me-2"></i>Mi Perfil
            </h5>
            <button type="button" class="btn-close btn-close-white" data-bs-dismiss="offcanvas" aria-label="Close"></button>
        </div>
        <div class="offcanvas-body bg-black text-white p-0" id="dashboard-content">
            <!-- El contenido se carga din√°micamente desde JavaScript -->
            <div class="loading-container">
                <div class="spinner-border text-primary" role="status">
                    <span class="visually-hidden">Cargando...</span>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Modal Wizard Finca -->
    <div class="modal fade" id="wizardFincaModal" tabindex="-1" aria-labelledby="wizardFincaModalLabel" aria-hidden="true" data-bs-backdrop="static" data-bs-keyboard="false">
        <div class="modal-dialog modal-xl modal-dialog-centered modal-dialog-scrollable">
            <div class="modal-content border-secondary">
                <div class="modal-header border-secondary">
                    <h4 class="modal-title w-100 text-center fw-bold text-white" id="wizardFincaModalLabel">
                        <i class="fas fa-seedling me-2"></i>Agregar Nueva Finca
                    </h4>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Cerrar"></button>
                </div>
                <div class="modal-body pt-3 text-white" id="wizard-content">
                    <!-- El contenido del wizard se carga din√°micamente desde JavaScript -->
                    <div class="loading-container-small">
                        <div class="spinner-border text-primary" role="status">
                            <span class="visually-hidden">Cargando...</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Modal Selecci√≥n de Especies -->
    <div class="modal fade" id="especiesModal" tabindex="-1" aria-labelledby="especiesModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content bg-dark text-white">
                <div class="modal-header border-secondary">
                    <h5 class="modal-title" id="especiesModalLabel">
                        <i class="fas fa-seedling me-2 text-success"></i>
                        Seleccionar Especies Cultivadas
                    </h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div class="mb-3">
                        <small class="text-info" id="especiesModalCounter">Seleccione hasta 5 especies (0/5 seleccionadas)</small>
                    </div>
                    <div class="especies-grid" id="especiesGrid">
                        <div class="text-center p-3">
                            <div class="spinner-border text-primary" role="status">
                                <span class="visually-hidden">Cargando especies...</span>
                            </div>
                            <p class="mt-2 text-muted">Cargando especies...</p>
                        </div>
                    </div>
                </div>
                <div class="modal-footer border-secondary">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
                        <i class="fas fa-times me-2"></i>Cancelar
                    </button>
                    <button type="button" class="btn btn-success" id="confirmarEspecies">
                        <i class="fas fa-check me-2"></i>Confirmar Selecci√≥n
                    </button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Leaflet JS -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <!-- Especies Modal JS -->
    <script src="js/especies-modal.js"></script>
    <!-- App JS -->
    <script src="js/app.js?v=ofertas-api-completa"></script>

    <!-- Modal para Crear/Editar Oferta de Trabajo -->
    <div class="modal fade" id="modalOfertaTrabajo" tabindex="-1" aria-labelledby="modalOfertaTrabajoLabel" aria-hidden="true" data-bs-backdrop="static" data-bs-keyboard="false">
        <div class="modal-dialog modal-lg modal-dialog-centered modal-dialog-scrollable">
            <div class="modal-content bg-dark border-secondary">
                <div class="modal-header border-secondary">
                    <h5 class="modal-title text-white" id="modalOfertaTrabajoLabel">
                        <i class="fas fa-briefcase me-2 text-info"></i>
                        <span id="modalOfertaTitulo">Nueva Oferta de Trabajo</span>
                    </h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Cerrar"></button>
                </div>
                <div class="modal-body">
                    <form id="formOfertaTrabajo" novalidate>
                        <!-- Informaci√≥n b√°sica -->
                        <div class="row mb-4">
                            <div class="col-12">
                                <h6 class="text-info mb-3">
                                    <i class="fas fa-info-circle me-2"></i>Informaci√≥n B√°sica
                                </h6>
                            </div>
                        </div>
                        
                        <div class="row">
                            <div class="col-md-8 mb-3">
                                <label for="ofertaTitulo" class="form-label text-white">
                                    <i class="fas fa-heading me-1"></i>T√≠tulo de la Oferta *
                                </label>
                                <input type="text" class="form-control" id="ofertaTitulo" name="titulo" required
                                       placeholder="Ej: Operario Agr√≠cola - Cosecha de Uva" maxlength="100">
                                <div class="invalid-feedback"></div>
                                <small class="text-muted">T√≠tulo claro y descriptivo (10-100 caracteres)</small>
                            </div>
                            <div class="col-md-4 mb-3">
                                <label for="ofertaEstado" class="form-label text-white">
                                    <i class="fas fa-flag me-1"></i>Estado
                                </label>
                                <select class="form-select" id="ofertaEstado" name="estado">
                                    <option value="BORRADOR">üìù Borrador</option>
                                    <option value="ACTIVA" selected>‚úÖ Activa</option>
                                    <option value="PAUSADA">‚è∏Ô∏è Pausada</option>
                                </select>
                            </div>
                        </div>

                        <div class="mb-3">
                            <label for="ofertaDescripcion" class="form-label text-white">
                                <i class="fas fa-align-left me-1"></i>Descripci√≥n del Trabajo *
                            </label>
                            <textarea class="form-control" id="ofertaDescripcion" name="descripcion" rows="4" required
                                      placeholder="Describe las tareas, responsabilidades y lo que se busca en el candidato..." maxlength="2000"></textarea>
                            <div class="invalid-feedback"></div>
                            <small class="text-muted">Descripci√≥n detallada (50-2000 caracteres)</small>
                        </div>

                        <!-- Detalles laborales -->
                        <div class="row mb-4">
                            <div class="col-12">
                                <h6 class="text-info mb-3">
                                    <i class="fas fa-briefcase me-2"></i>Detalles Laborales
                                </h6>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label for="ofertaModalidad" class="form-label text-white">
                                    <i class="fas fa-clock me-1"></i>Modalidad de Trabajo *
                                </label>
                                <select class="form-select" id="ofertaModalidad" name="modalidadTrabajo" required>
                                    <option value="">Seleccionar modalidad</option>
                                    <option value="TIEMPO_COMPLETO">üïê Tiempo Completo</option>
                                    <option value="MEDIO_TIEMPO">üïí Medio Tiempo</option>
                                    <option value="TEMPORAL">üìÖ Temporal/Estacional</option>
                                    <option value="POR_HORAS">‚è∞ Por Horas</option>
                                    <option value="COSECHA">üçá Solo Cosecha</option>
                                </select>
                                <div class="invalid-feedback"></div>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label for="ofertaSalario" class="form-label text-white">
                                    <i class="fas fa-dollar-sign me-1"></i>Salario (ARS)
                                </label>
                                <input type="number" class="form-control" id="ofertaSalario" name="salario" 
                                       placeholder="Ej: 150000" min="0" max="10000000" step="1000">
                                <div class="invalid-feedback"></div>
                                <small class="text-muted">Salario mensual aproximado (opcional)</small>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-md-8 mb-3">
                                <label for="ofertaUbicacion" class="form-label text-white">
                                    <i class="fas fa-map-marker-alt me-1"></i>Ubicaci√≥n *
                                </label>
                                <input type="text" class="form-control" id="ofertaUbicacion" name="ubicacion" required
                                       placeholder="Ej: Mendoza, Maip√∫ - Finca Los √Ålamos" maxlength="100">
                                <div class="invalid-feedback"></div>
                                <small class="text-muted">Ciudad, departamento o zona espec√≠fica</small>
                            </div>
                            <div class="col-md-4 mb-3">
                                <label for="ofertaFechaLimite" class="form-label text-white">
                                    <i class="fas fa-calendar-alt me-1"></i>Fecha L√≠mite
                                </label>
                                <input type="date" class="form-control" id="ofertaFechaLimite" name="fechaLimite">
                                <div class="invalid-feedback"></div>
                                <small class="text-muted">Hasta cu√°ndo postular</small>
                            </div>
                        </div>

                        <!-- Requisitos y contacto -->
                        <div class="row mb-4">
                            <div class="col-12">
                                <h6 class="text-info mb-3">
                                    <i class="fas fa-check-circle me-2"></i>Requisitos y Contacto
                                </h6>
                            </div>
                        </div>

                        <div class="mb-3">
                            <label for="ofertaRequisitos" class="form-label text-white">
                                <i class="fas fa-list-check me-1"></i>Requisitos del Candidato
                            </label>
                            <textarea class="form-control" id="ofertaRequisitos" name="requisitos" rows="3"
                                      placeholder="Ej: Experiencia previa en agricultura, disponibilidad de horarios, veh√≠culo propio..." maxlength="1000"></textarea>
                            <div class="invalid-feedback"></div>
                            <small class="text-muted">Lista los requisitos m√°s importantes (opcional)</small>
                        </div>

                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label for="ofertaContactoNombre" class="form-label text-white">
                                    <i class="fas fa-user me-1"></i>Nombre de Contacto
                                </label>
                                <input type="text" class="form-control" id="ofertaContactoNombre" name="contactoNombre"
                                       placeholder="Ej: Juan P√©rez" maxlength="100">
                                <div class="invalid-feedback"></div>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label for="ofertaContactoTelefono" class="form-label text-white">
                                    <i class="fas fa-phone me-1"></i>Tel√©fono de Contacto
                                </label>
                                <input type="tel" class="form-control" id="ofertaContactoTelefono" name="contactoTelefono"
                                       placeholder="Ej: 261-123-4567" maxlength="20">
                                <div class="invalid-feedback"></div>
                            </div>
                        </div>

                        <!-- Campo oculto para ID (en caso de edici√≥n) -->
                        <input type="hidden" id="ofertaId" name="id">
                    </form>
                </div>
                <div class="modal-footer border-secondary">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
                        <i class="fas fa-times me-2"></i>Cancelar
                    </button>
                    <button type="button" class="btn btn-outline-primary" onclick="guardarBorradorOferta()">
                        <i class="fas fa-save me-2"></i>Guardar Borrador
                    </button>
                    <button type="button" class="btn btn-success" onclick="publicarOferta()">
                        <i class="fas fa-check me-2"></i>Publicar Oferta
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal para Ver Detalles de Oferta -->
    <div class="modal fade" id="modalVerOferta" tabindex="-1" aria-labelledby="modalVerOfertaLabel" aria-hidden="true">
        <div class="modal-dialog modal-xl modal-dialog-centered modal-dialog-scrollable">
            <div class="modal-content bg-dark border-secondary">
                <div class="modal-header border-secondary">
                    <h5 class="modal-title text-white" id="modalVerOfertaLabel">
                        <i class="fas fa-eye me-2 text-info"></i>Detalles de la Oferta
                    </h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Cerrar"></button>
                </div>
                <div class="modal-body" id="contenidoVerOferta">
                    <!-- Contenido din√°mico -->
                    <div class="text-center py-5">
                        <div class="spinner-border text-info" role="status">
                            <span class="visually-hidden">Cargando...</span>
                        </div>
                        <p class="text-white mt-3">Cargando detalles de la oferta...</p>
                    </div>
                </div>
                <div class="modal-footer border-secondary">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
                        <i class="fas fa-times me-2"></i>Cerrar
                    </button>
                    <button type="button" class="btn btn-warning" onclick="editarOfertaDesdeModal()">
                        <i class="fas fa-edit me-2"></i>Editar
                    </button>
                    <button type="button" class="btn btn-info" onclick="verPostulacionesOferta()">
                        <i class="fas fa-users me-2"></i>Ver Postulaciones
                    </button>
                </div>
            </div>
        </div>
    </div>

</body>
</html>
